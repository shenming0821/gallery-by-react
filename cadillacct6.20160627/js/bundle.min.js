"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();require(["http://cdn01.51autoimg.com/51auto/js/lib/jquery.min.js","http://cdn01.51autoimg.com/apps/zhuanti.51auto.com/citroen.20160608/js/idangerous.swiper.js"],function(){var e=function(){function e(){_classCallCheck(this,e),this.eleClick(),this.selects(),this.statisticsFun(),this.swiper(),this.present()}return _createClass(e,[{key:"eleClick",value:function(){$(".tabs").on("click","div",function(){$(this).addClass("active").siblings().removeClass("active"),0==$(this).index()?($(".tit1").show(),$(".tit2").hide(),$(".sub-btn").removeClass("sub-btn2")):($(".tit1").hide(),$(".tit2").show(),$(".sub-btn").addClass("sub-btn2"))})}},{key:"selects",value:function(){require(["http://cdn01.51autoimg.com/apps/zhuanti.51auto.com/cadillacct6.20160627/js/selects.min.js"])}},{key:"getFormJson",value:function(e){var t={},n="";return $.each($("#"+e).serializeArray(),function(e,a){n=a.name,t[n]=a.value}),t}},{key:"present",value:function(){var e=this,t=function(){var e=!0,t=function(e,t){var n=$("#"+e).val().replace(/\s/g,"");return t.test(n)},n=function(e){return $("#"+e).val()},a=["province","citys","dealer"],i=function(t){return $(".tab-left").hasClass("active")&&$(".cell input[type='radio']:checked").length<5?(e=!1,alert("请完整勾选您的车况！"),!1):t.length?void $.each(t,function(t,n){return n.fun(n.name,n.reg)?a.includes(n.name)&&n.fun(n.name)==-1?(e=!1,alert(n.msg),!1):void 0:(e=!1,alert(n.msg),!1)}):(e=!1,!1)},r=[{name:"name",fun:t,reg:/^[a-zA-Z\u4e00-\u9fa5]{2,25}$/,msg:"请输英文或中文姓名，必须大于2个字符，小于25个字符！"},{name:"tel",fun:t,reg:/(^1[3|4|5|7|8][0-9]\d{8}$)/,msg:"请输入正确的11位手机号码！"},{name:"province",fun:n,msg:"请选择您所需报名省份！"},{name:"citys",fun:n,msg:"请选择您所需报名城市！"},{name:"dealer",fun:n,msg:"请选择您所需报名经销商！"}];return i(r),e},n=function(){var e="[5系] ",t="";if($(".tab-right").hasClass("active"))e="[非5系] ";else{for(var n=0,a=$(".cell input[type='radio']:checked").length;n<a;n++)t+=$(".cell input[type='radio']:checked").eq(n).next().html();t="["+t+"] "}var i=e+t+"地区:"+$("#province").val()+$("#citys").val()+" 经销商:"+$("#dealer").val();$("#sa-name").val($("#name").val()),$("#sa-telephone").val($("#tel").val()),$("#sa-note").val(i)},a=function(){var e=["name","sa-name","tel","sa-telephone","sa-note"],t=!0,n=!1,a=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var c=i.value;$("#"+c).val("")}}catch(o){n=!0,a=o}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw a}}$(".cell input[type='radio']:checked").attr("checked",!1);var s=["province","citys","dealer"],l=!0,u=!1,p=void 0;try{for(var m,f=s[Symbol.iterator]();!(l=(m=f.next()).done);l=!0){var v=m.value;$("#"+v).val(-1)}}catch(o){u=!0,p=o}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw p}}$("#dealer").html('<option value="-1">请选择经销商</option>')},i=function(i){if(!t())return!1;n();var r=e.getFormJson(i);$.ajax({url:"http://admin2.51auto.com:8080/cms/signupapi/",type:"GET",dataType:"jsonp",crossDomain:!0,jsonp:"callbackparam",jsonpCallback:"success",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"},data:r,error:function(e){},success:function(e){alert("报名"+e.msg+"！"),a()}})};$("body").on("click",".sub-btn",function(){i("form-info")})}},{key:"swiper",value:function(){var e=new Swiper(".swiper-container",{autoplay:3e3,direction:"horizontalspeed",loop:!0,autoplayDisableOnInteraction:!1});$(".swiper-button-prev").on("click",function(t){t.preventDefault(),e.swipePrev()}),$(".swiper-button-next").on("click",function(t){t.preventDefault(),e.swipeNext()})}},{key:"statisticsFun",value:function(){var e=window.location.toString(),t=e.split("?");if(t.length>1){for(var n=t[1].split("&"),a="",i=0;i<n.length;i++){var r=n[i].split("=");""!=a&&(a+=" "),"utm_source"!=r[0]&&"utm_medium"!=r[0]&&"utm_term"!=r[0]&&"utm_content"!=r[0]&&"utm_campaign"!=r[0]||(a+=decodeURIComponent(r[1]))}$("#resource").val(a)}!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?954c42feaba402a134e4d89ae31cc766";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(e,t,n,a,i,r,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,r=t.createElement(n),c=t.getElementsByTagName(n)[0],r.async=1,r.src=a,c.parentNode.insertBefore(r,c)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-254381-1","auto"),ga("send","pageview")}}]),e}();$(function(){return new e})});